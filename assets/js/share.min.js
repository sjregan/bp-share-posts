!function(s,t,n,a){"use strict";function e(t,n){this.element=t,this.settings=s.extend({},o,n),this._defaults=o,this._name=i,this.$container=s(t),this.sharedIcon=this.$container.data("shared-icon"),this.sharedLabel=this.$container.data("shared-label"),this.postId=parseInt(this.$container.data("post-id")),this.init()}var i="bpSharePostsButton",o={};s.extend(e.prototype,{init:function(){this.$container.on("click",this.shareClicked.bind(this))},shareClicked:function(s){if(s.preventDefault(),!this.$container.hasClass("bp-share-posts-shared")&&!this.$container.hasClass("bp-share-posts-loading")){this.$container.addClass("bp-share-posts-loading");var t=this,n={action:"bp_share_post",post_id:this.postId};jQuery.post(ajaxurl,n,function(s){if(s.success){if(t.sharedIcon.length){var n=jQuery(t.sharedIcon);t.$container.find(".bp-share-posts-icon").remove(),t.$container.prepend(n),t.$container.addClass("bp-share-posts-shared")}t.sharedLabel.length&&t.$container.find(".bp-share-posts-label").html(t.sharedLabel)}},"json").always(function(){t.$container.removeClass("bp-share-posts-loading")})}}}),s.fn[i]=function(t){return this.each(function(){s.data(this,"plugin_"+i)||s.data(this,"plugin_"+i,new e(this,t))})}}(jQuery,window,document);