!function(t){"use strict";function s(s,e){this.element=s,this.settings=t.extend({},i,e),this._defaults=i,this._name=n,this.$container=t(s),this.sharedIcon=this.$container.data("shared-icon"),this.postId=parseInt(this.$container.data("post-id")),this.init()}var n="bpSharePostsButton",i={};t.extend(s.prototype,{init:function(){this.$container.on("click",this.shareClicked.bind(this))},shareClicked:function(t){if(t.preventDefault(),!this.$container.hasClass("bp-share-posts-shared")&&!this.$container.hasClass("bp-share-posts-loading")){this.$container.addClass("bp-share-posts-loading");var s=this,n={action:"bp_share_post",post_id:this.postId};jQuery.post(ajaxurl,n,function(t){if(t.success){var n=jQuery(s.sharedIcon);s.$container.find(".bp-share-posts-icon").remove(),s.$container.prepend(n),s.$container.addClass("bp-share-posts-shared")}},"json").always(function(){s.$container.removeClass("bp-share-posts-loading")})}}}),t.fn[n]=function(i){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new s(this,i))})}}(jQuery,window,document);